(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return s(1825)}])},1825:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return u}});var a=s(5893),t=s(7294),l=s(9921);let i=e=>{let[r,s]=(0,t.useState)(e);return{formulario:r,handleChange:e=>{let{name:a,value:t}=e.target;s({...r,[a]:t})},...r}};var n=s(6154);let c=e=>{let{children:r,title:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("main",{children:(0,a.jsxs)("div",{className:"h-screen flex flex-col justify-center bg-gray-50 py-12 sm:px-6 lg:px-8 items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center my-9"}),(0,a.jsx)("section",{className:"overflow-hidden border-2 border-gray-300 rounded-xl ",children:(0,a.jsx)("div",{className:"flex min- overflow-hidden",children:(0,a.jsx)("div",{className:"flex flex-col justify-center flex-1 px-4 py-12 overflow-hidden sm:px-6 lg:flex-none lg:px-20 xl:px-24",children:(0,a.jsx)("div",{className:"w-full max-w-xl mx-auto lg:w-96",children:(0,a.jsx)("div",{children:r})})})})})]})})})};var d=s(1163),o=s(1955),m=s(7525);let x={isLoggedIn:!1,user:void 0};var u=function(){let e=(0,d.useRouter)(),{user:r,loginUser:s,isLoggedIn:u}=(0,t.useContext)(m.Vo),[f,h]=(0,t.useState)(!1),[g,p]=(0,t.useState)(!0),{handleChange:y,formulario:b}=i({email:"",password:""}),j=async r=>{r.preventDefault(),h(!1);let a=await s(b.email,b.password);if(!a){h(!0),setTimeout(()=>h(!1),3e3);return}e.replace("/reports")},[v,k]=(0,t.useReducer)(m.dX,x);(0,t.useEffect)(()=>{w()},[]);let w=async()=>{try{let{data:r}=await n.Z.get("".concat("http://192.188.58.82:3000/api/v2","/login/renew"),{headers:{"x-token":o.Z.get("token")}}),{token:s,usuario:a}=r;console.log(s,a),o.Z.set("token",s),k({type:"[Auth] - Login",payload:a}),e.replace("/reports.html").then(()=>p(!1))}catch(e){o.Z.remove("token"),p(!1)}};return g?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:"Cargando..."}):(0,a.jsx)(l.A,{title:"Auth",children:(0,a.jsxs)(c,{title:"Ingresar",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold leading-tight tracking-tight text-gray-800 md:text-2xl dark:text-slate-700",children:"Iniciar sesi\xf3n"}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("form",{action:"#",method:"POST",className:"space-y-6",onSubmit:j,children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"email",className:"bblock mb-2 text-sm font-medium text-gray-900 dark:text-gray-900",children:[" ","Direcci\xf3n de correo electr\xf3nico"," "]}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-slate-800 dark:focus:ring-blue-500 dark:focus:border-blue-500",id:"email",name:"email",type:"email",autoComplete:"email",placeholder:"Tu correo electr\xf3nico",onChange:y})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-900",children:[" ","Contrase\xf1a"," "]}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("input",{className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5  dark:border-gray-600 dark:placeholder-gray-400 dark:text-slate-800 dark:focus:ring-blue-500 dark:focus:border-blue-500",id:"password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Tu contrase\xf1a",onChange:y})})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"text-xs",children:"Est\xe1 secci\xf3n es exclusiva de usuarios administradores por favor, inicie sesi\xf3n para acceder a la misma."})}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"w-full  bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 from-blue-900 bg-blue-800 py-1 text-white shadow ",children:"Iniciar sesi\xf3n"})})]})})})]})})}}},function(e){e.O(0,[675,557,921,774,888,179],function(){return e(e.s=163)}),_N_E=e.O()}]);